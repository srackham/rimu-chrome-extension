/* rimu 5.3.0 (https://github.com/srackham/rimu.git) */
var Rimu=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){var api=__webpack_require__(1);var options=__webpack_require__(3);function render(source,opts){if(opts===void 0){opts={}}if(typeof source!=="string"){throw new TypeError("render(): source argument is not a string")}if(opts!==undefined&&typeof opts!=="object"){throw new TypeError("render(): options argument is not an object")}options.updateOptions(opts);return api.render(source)}exports.render=render;api.reset()},function(module,exports,__webpack_require__){var io=__webpack_require__(10);var lineBlocks=__webpack_require__(8);var delimitedBlocks=__webpack_require__(9);var lists=__webpack_require__(11);var macros=__webpack_require__(2);var options=__webpack_require__(3);var quotes=__webpack_require__(6);var replacements=__webpack_require__(7);function render(source){var reader=new io.Reader(source);var writer=new io.Writer;while(!reader.eof()){reader.skipBlankLines();if(reader.eof())break;if(lineBlocks.render(reader,writer))continue;if(lists.render(reader,writer))continue;if(delimitedBlocks.render(reader,writer))continue;throw"no matching delimited block found"}return writer.toString()}exports.render=render;function reset(){options.setDefaults();delimitedBlocks.reset();macros.reset();quotes.reset();replacements.reset()}exports.reset=reset},function(module,exports,__webpack_require__){var options=__webpack_require__(3);var MATCH_MACRO=/\{([\w\-]+)([!=|?](?:|[\s\S]*?[^\\]))?\}/;var MATCH_MACROS=RegExp("\\\\?"+MATCH_MACRO.source,"g");exports.MACRO_LINE=RegExp("^"+MATCH_MACRO.source+".*$");exports.MACRO_DEF_OPEN=/^\\?\{[\w\-]+\}\s*=\s*'(.*)$/;exports.MACRO_DEF_CLOSE=/^(.*)'$/;exports.MACRO_DEF=/^\\?\{([\w\-]+)\}\s*=\s*'(.*)'$/;exports.defs=[];function reset(){exports.defs=[]}exports.reset=reset;function getValue(name){for(var _i=0;_i<exports.defs.length;_i++){var def=exports.defs[_i];if(def.name===name){return def.value}}return null}exports.getValue=getValue;function setValue(name,value){for(var _i=0;_i<exports.defs.length;_i++){var def=exports.defs[_i];if(def.name===name){def.value=value;return}}exports.defs.push({name:name,value:value})}exports.setValue=setValue;function render(text){text=text.replace(MATCH_MACROS,function(match){var submatches=[];for(var _i=1;_i<arguments.length;_i++){submatches[_i-1]=arguments[_i]}if(match[0]==="\\"){return match.slice(1)}var name=submatches[0];var params=submatches[1]||"";var value=getValue(name);switch(options.macroMode){case 0:return match;case 1:break;case 2:if(value===null){return match}break;case 3:if(!/^--/.test(name)){return match}break;case 4:if(value===null&&!/^--/.test(name)){return match}break}params=params.replace(/\\\}/g,"}");switch(params[0]){case"?":return value===null?params.slice(1):value;case"|":var paramsList=params.slice(1).split("|");value=(value||"").replace(/\\?\$\d+/g,function(match){if(match[0]==="\\"){return match.slice(1)}var param=paramsList[Number(match.slice(1))-1];return param===undefined?"":param});return value;case"!":case"=":var pattern=params.slice(1);var skip=!RegExp("^"+pattern+"$").test(value||"");if(params[0]==="!"){skip=!skip}return skip?"\x00":"";default:return value||""}});if(text.indexOf("\x00")!==-1){var lines=text.split("\n");for(var i=lines.length-1;i>=0;--i){if(lines[i].indexOf("\x00")!==-1){lines.splice(i,1)}}text=lines.join("\n")}return text}exports.render=render},function(module,exports,__webpack_require__){var utils=__webpack_require__(4);var api=__webpack_require__(1);exports.safeMode;exports.htmlReplacement;exports.macroMode;function setDefaults(){exports.safeMode=0;exports.htmlReplacement="<mark>replaced HTML</mark>";exports.macroMode=4}exports.setDefaults=setDefaults;function isSafe(){return exports.safeMode!==0}exports.isSafe=isSafe;function setSafeMode(value){var n=Number(value);if(!isNaN(n)&&n>=0&&n<=3){exports.safeMode=n}}function setMacroMode(value){var n=Number(value);if(!isNaN(n)&&n>=0&&n<=4){exports.macroMode=n}}function setHtmlReplacement(value){exports.htmlReplacement=value}function setReset(value){if(value===true||value==="true"){api.reset()}}function updateOptions(options){if("reset"in options)setReset(options.reset);if("safeMode"in options)setSafeMode(options.safeMode);if("htmlReplacement"in options)setHtmlReplacement(options.htmlReplacement);if("macroMode"in options)setMacroMode(options.macroMode)}exports.updateOptions=updateOptions;function setOption(name,value){var option={};option[name]=value;updateOptions(option)}exports.setOption=setOption;function safeModeFilter(html){switch(exports.safeMode){case 0:return html;case 1:return"";case 2:return exports.htmlReplacement;case 3:return utils.replaceSpecialChars(html)}}exports.safeModeFilter=safeModeFilter},function(module,exports,__webpack_require__){var macros=__webpack_require__(2);var spans=__webpack_require__(5);var lineBlocks=__webpack_require__(8);function trimLeft(s){return s.replace(/^\s+/g,"")}exports.trimLeft=trimLeft;function trimRight(s){return s.replace(/\s+$/g,"")}exports.trimRight=trimRight;function trim(s){return s.replace(/^\s+|\s+$/g,"")}exports.trim=trim;function escapeRegExp(s){return s.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}exports.escapeRegExp=escapeRegExp;function replaceSpecialChars(s){return s.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")}exports.replaceSpecialChars=replaceSpecialChars;function replaceMatch(match,replacement,expansionOptions){return replacement.replace(/\$\d/g,function(){var i=Number(arguments[0][1]);var text=match[i];return replaceInline(text,expansionOptions)})}exports.replaceMatch=replaceMatch;function copy(source){var result={};for(var key in source){if(source.hasOwnProperty(key)){result[key]=source[key]}}return result}exports.copy=copy;function merge(target,source){for(var key in source){target[key]=source[key]}}exports.merge=merge;function replaceInline(text,expansionOptions){if(expansionOptions.macros){text=macros.render(text);text=text===null?"":text}if(expansionOptions.spans){return spans.render(text)}else if(expansionOptions.specials){text=replaceSpecialChars(text)}return text}exports.replaceInline=replaceInline;function injectHtmlAttributes(tag){if(!tag){return tag}if(lineBlocks.htmlClasses){if(/class="\S.*"/.test(tag)){tag=tag.replace(/class="(\S.*?)"/,'class="'+lineBlocks.htmlClasses+' $1"')}else{lineBlocks.htmlAttributes=trim('class="'+lineBlocks.htmlClasses+'" '+lineBlocks.htmlAttributes)}}if(lineBlocks.htmlAttributes){var match=tag.match(/^<([a-zA-Z]+|h[1-6])(?=[ >])/);if(match){var before=tag.slice(0,match[0].length);var after=tag.slice(match[0].length);tag=before+" "+lineBlocks.htmlAttributes+after}}lineBlocks.htmlClasses="";lineBlocks.htmlAttributes="";return tag}exports.injectHtmlAttributes=injectHtmlAttributes},function(module,exports,__webpack_require__){var utils=__webpack_require__(4);var quotes=__webpack_require__(6);var replacements=__webpack_require__(7);function render(source){var result;result=preReplacements(source);var fragments=[{text:result,done:false}];fragments=fragQuotes(fragments);fragSpecials(fragments);result=defrag(fragments);return postReplacements(result)}exports.render=render;function defrag(fragments){return fragments.reduce(function(result,fragment){return result+fragment.text},"")}function fragQuotes(fragments){var result;result=[];fragments.forEach(function(fragment){result.push.apply(result,fragQuote(fragment))});result.filter(function(fragment){return!fragment.done}).forEach(function(fragment){return fragment.text=quotes.unescape(fragment.text)});return result}function fragQuote(fragment){if(fragment.done){return[fragment]}var quotesRe=quotes.quotesRe;var match;quotesRe.lastIndex=0;while(true){match=quotesRe.exec(fragment.text);if(!match){return[fragment]}if(match[0][0]==="\\"){quotesRe.lastIndex=match.index+match[1].length+1;continue}break}var result=[];var def=quotes.getDefinition(match[1]);while(fragment.text[quotesRe.lastIndex]===match[1][0]){match[2]+=match[1][0];quotesRe.lastIndex+=1}var before=match.input.slice(0,match.index);var quoted=match[2];var after=match.input.slice(quotesRe.lastIndex);result.push({text:before,done:false});result.push({text:def.openTag,done:true});if(!def.spans){quoted=utils.replaceSpecialChars(quoted);quoted=quoted.replace(/\u0000/g,"");result.push({text:quoted,done:true})}else{result.push.apply(result,fragQuote({text:quoted,done:false}))}result.push({text:def.closeTag,done:true});result.push.apply(result,fragQuote({text:after,done:false}));return result}var savedReplacements;function preReplacements(text){savedReplacements=[];var fragments=fragReplacements([{text:text,done:false}]);return fragments.reduce(function(result,fragment){if(fragment.done){savedReplacements.push(fragment);return result+"\x00"}else{return result+fragment.text}},"")}function postReplacements(text){return text.replace(/\u0000|\u0001/g,function(match){var fragment=savedReplacements.shift();return match==="\x00"?fragment.text:utils.replaceSpecialChars(fragment.verbatim)})}function fragReplacements(fragments){var result;replacements.defs.forEach(function(def){result=[];fragments.forEach(function(fragment){result.push.apply(result,fragReplacement(fragment,def))});fragments=result});return result}function fragReplacement(fragment,def){if(fragment.done){return[fragment]}var replacementRe=def.match;var match;replacementRe.lastIndex=0;match=replacementRe.exec(fragment.text);if(!match){return[fragment]}var result=[];var before=match.input.slice(0,match.index);result.push({text:before,done:false});var replacement;if(match[0][0]==="\\"){replacement=utils.replaceSpecialChars(match[0].slice(1))}else{if(!def.filter){replacement=utils.replaceMatch(match,def.replacement,{specials:true})}else{replacement=def.filter(match)}}result.push({text:replacement,done:true,verbatim:match[0]});var after=match.input.slice(replacementRe.lastIndex);result.push.apply(result,fragReplacement({text:after,done:false},def));return result}function fragSpecials(fragments){fragments.filter(function(fragment){return!fragment.done}).forEach(function(fragment){return fragment.text=utils.replaceSpecialChars(fragment.text)})}},function(module,exports,__webpack_require__){var utils=__webpack_require__(4);var defs;var DEFAULT_DEFS=[{quote:"**",openTag:"<strong>",closeTag:"</strong>",spans:true},{quote:"*",openTag:"<em>",closeTag:"</em>",spans:true},{quote:"__",openTag:"<strong>",closeTag:"</strong>",spans:true},{quote:"_",openTag:"<em>",closeTag:"</em>",spans:true},{quote:"``",openTag:"<code>",closeTag:"</code>",spans:false},{quote:"`",openTag:"<code>",closeTag:"</code>",spans:false},{quote:"~~",openTag:"<del>",closeTag:"</del>",spans:true}];exports.quotesRe;var unescapeRe;function reset(){defs=DEFAULT_DEFS.map(function(def){return utils.copy(def)});initializeRegExps()}exports.reset=reset;function initializeRegExps(){var quotes=defs.map(function(def){return utils.escapeRegExp(def.quote)});exports.quotesRe=RegExp("\\\\?("+quotes.join("|")+")([^\\s\\\\]|\\S[\\s\\S]*?[^\\s\\\\])\\1","g");unescapeRe=RegExp("\\\\("+quotes.join("|")+")","g")}exports.initializeRegExps=initializeRegExps;function getDefinition(quote){return defs.filter(function(def){return def.quote===quote})[0]}exports.getDefinition=getDefinition;function unescape(s){return s.replace(unescapeRe,"$1")}exports.unescape=unescape;function setDefinition(def){for(var _i=0;_i<defs.length;_i++){var d=defs[_i];if(d.quote===def.quote){d.openTag=def.openTag;d.closeTag=def.closeTag;d.spans=def.spans;return}}if(def.quote.length===2){defs.unshift(def)}else{defs.push(def)}initializeRegExps()}exports.setDefinition=setDefinition},function(module,exports,__webpack_require__){var options=__webpack_require__(3);var utils=__webpack_require__(4);exports.defs;var DEFAULT_DEFS=[{match:/\\?(&[\w#][\w]+;)/g,replacement:"",filter:function(match){return match[1]}},{match:/[\\ ]\\(\n|$)/g,replacement:"<br>$1"},{match:/\\?<<#([a-zA-Z][\w\-]*)>>/g,replacement:'<span id="$1"></span>'},{match:/\\?<image:([^\s\|]+)\|([\s\S]*?)>/g,replacement:'<img src="$1" alt="$2">'},{match:/\\?<image:([^\s\|]+?)>/g,replacement:'<img src="$1" alt="$1">'},{match:/\\?!\[([\s\S]*?)\]\s*\((\S+?)\)/g,replacement:'<img src="$2" alt="$1">'},{match:/\\?<(\S+@[\w\.\-]+)\|([\s\S]+?)>/g,replacement:'<a href="mailto:$1">$2</a>'},{match:/\\?<(\S+@[\w\.\-]+)>/g,replacement:'<a href="mailto:$1">$1</a>'},{match:/\\?(<[!\/]?[a-zA-Z\-]+(:?\s+[^<>&]+)?>)/g,replacement:"",filter:function(match){return options.safeModeFilter(match[1])}},{match:/\\?<([^|]+?)>/g,replacement:'<a href="$1">$1</a>'},{match:/\\?<(.+?)\|([\s\S]*?)>/g,replacement:'<a href="$1">$2</a>'},{match:/\\?\[([\s\S]*?)\]\s*\((.+?)\)/g,replacement:'<a href="$2">$1</a>'},{match:/\\?((?:http|https):\/\/[^\s"']*[A-Za-z0-9\/#])/g,replacement:'<a href="$1">$1</a>'},{match:/(\S\\)(?=`)/g,replacement:"$1"},{match:/([a-zA-Z0-9]_)(?=[a-zA-Z0-9])/g,replacement:"$1"}];function reset(){exports.defs=DEFAULT_DEFS.map(function(def){return utils.copy(def)})}exports.reset=reset;function setDefinition(regexp,flags,replacement){if(!/g/.test(flags)){flags+="g"}for(var _i=0;_i<exports.defs.length;_i++){var def=exports.defs[_i];if(def.match.source===regexp){def.match=new RegExp(regexp,flags);def.replacement=replacement;return}}exports.defs.unshift({match:new RegExp(regexp,flags),replacement:replacement})}exports.setDefinition=setDefinition},function(module,exports,__webpack_require__){var utils=__webpack_require__(4);var options=__webpack_require__(3);var delimitedBlocks=__webpack_require__(9);var quotes=__webpack_require__(6);var replacements=__webpack_require__(7);var macros=__webpack_require__(2);var defs=[{match:/^\\?\|([\w\-]+)\|\s*=\s*'(.*)'$/,replacement:"",expansionOptions:{},filter:function(match){if(options.isSafe()){return""}delimitedBlocks.setDefinition(match[1],match[2]);return""}},{match:/^(\S{1,2})\s*=\s*'([^\|]*)(\|{1,2})(.*)'$/,replacement:"",expansionOptions:{macros:true},filter:function(match){if(options.isSafe()){return""}quotes.setDefinition({quote:match[1],openTag:utils.replaceInline(match[2],this.expansionOptions),closeTag:utils.replaceInline(match[4],this.expansionOptions),spans:match[3]==="|"});return""}},{match:/^\\?\/(.+)\/([igm]*)\s*=\s*'(.*)'$/,replacement:"",expansionOptions:{macros:true},filter:function(match){if(options.isSafe()){return""}var pattern=match[1];var flags=match[2];var replacement=match[3];replacement=utils.replaceInline(replacement,this.expansionOptions);replacements.setDefinition(pattern,flags,replacement);return""}},{match:macros.MACRO_DEF,replacement:"",expansionOptions:{macros:true},filter:function(match){if(options.isSafe()){return""}var name=match[1];var value=match[2];value=utils.replaceInline(value,this.expansionOptions);macros.setValue(name,value);return""}},{match:macros.MACRO_LINE,replacement:"",expansionOptions:{},verify:function(match){return!macros.MACRO_DEF_OPEN.test(match[0])},filter:function(match,reader){var value=macros.render(match[0]);if(value===match[0]){value="\\"+value}var spliceArgs=[reader.pos+1,0].concat(value.split("\n"));Array.prototype.splice.apply(reader.lines,spliceArgs);return""}},{match:/^\\?((?:#|=){1,6})\s+(.+?)(?:\s+(?:#|=){1,6})?$/,replacement:"<h$1>$2</h$1>",expansionOptions:{macros:true,spans:true},filter:function(match){match[1]=match[1].length.toString();return utils.replaceMatch(match,this.replacement,this.expansionOptions)}},{match:/^\\?\/{2}(.*)$/,replacement:"",expansionOptions:{}},{match:/^\\?<image:([^\s\|]+)\|([\s\S]+?)>$/,replacement:'<img src="$1" alt="$2">',expansionOptions:{macros:true,specials:true}},{match:/^\\?<image:([^\s\|]+?)>$/,replacement:'<img src="$1" alt="$1">',expansionOptions:{macros:true,specials:true}},{match:/^\\?<<#([a-zA-Z][\w\-]*)>>$/,replacement:'<div id="$1"></div>',expansionOptions:{macros:true,specials:true}},{name:"attributes",match:/^\\?\.[a-zA-Z#\[+-].*$/,replacement:"",expansionOptions:{macros:true},verify:function(match){var text=match[0];text=utils.replaceInline(text,this.expansionOptions);match=/^\\?\.((?:\s*[a-zA-Z][\w\-]*)+)*(?:\s*)?(#[a-zA-Z][\w\-]*\s*)?(?:\s*)?(\[.+\])?(?:\s*)?([+-][ \w+-]+)?$/.exec(text);if(!match){return false}if(match[1]){exports.htmlClasses+=" "+utils.trim(match[1]);exports.htmlClasses=utils.trim(exports.htmlClasses)}if(match[2]){exports.htmlAttributes+=' id="'+utils.trim(match[2]).slice(1)+'"'}if(match[3]&&!options.isSafe()){exports.htmlAttributes+=" "+utils.trim(match[3].slice(1,match[3].length-1))}exports.htmlAttributes=utils.trim(exports.htmlAttributes);delimitedBlocks.setBlockOptions(exports.blockOptions,match[4]);return true},filter:function(match){return""}},{match:/^\\?\.(safeMode|htmlReplacement|macroMode|reset)\s*=\s*'(.*)'$/,replacement:"",expansionOptions:{macros:true},filter:function(match){if(!options.isSafe()){options.setOption(match[1],match[2])}return""}}];exports.htmlClasses="";exports.htmlAttributes="";exports.blockOptions={};function render(reader,writer){if(reader.eof())throw"premature eof";for(var _i=0;_i<defs.length;_i++){var def=defs[_i];var match=def.match.exec(reader.cursor());if(match){if(match[0][0]==="\\"){reader.cursor(reader.cursor().slice(1));continue}if(def.verify&&!def.verify(match)){continue}var text=void 0;if(!def.filter){text=utils.replaceMatch(match,def.replacement,def.expansionOptions)}else{text=def.filter(match,reader)}text=utils.injectHtmlAttributes(text);writer.write(text);reader.next();if(text&&!reader.eof()){writer.write("\n")}return true}}return false}exports.render=render;function getDefinition(name){return defs.filter(function(def){return def.name===name})[0]}exports.getDefinition=getDefinition},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var utils=__webpack_require__(4);var options=__webpack_require__(3);var macros=__webpack_require__(2);var lineBlocks=__webpack_require__(8);var defs;var DEFAULT_DEFS=[{openMatch:macros.MACRO_DEF_OPEN,closeMatch:macros.MACRO_DEF_CLOSE,openTag:"",closeTag:"",expansionOptions:{macros:true},delimiterFilter:delimiterTextFilter,contentfilter:function(text,match,expansionOptions){var name=match[0].match(/^\{([\w\-]+)\}/)[1];text=text.replace(/' *\\\n/g,"'\n");text=text.replace(/(' *[\\]+)\\\n/g,"$1\n");text=utils.replaceInline(text,expansionOptions);macros.setValue(name,text);return""}},{name:"comment",openMatch:/^\\?\/\*+$/,closeMatch:/^\*+\/$/,openTag:"",closeTag:"",expansionOptions:{skip:true,specials:true}},{name:"division",openMatch:/^\\?(\.{2,})([\w\s-]*)$/,openTag:"<div>",closeTag:"</div>",expansionOptions:{container:true,specials:true},delimiterFilter:classInjectionFilter},{name:"quote",openMatch:/^\\?("{2,})([\w\s-]*)$/,openTag:"<blockquote>",closeTag:"</blockquote>",expansionOptions:{container:true,specials:true},delimiterFilter:classInjectionFilter},{name:"code",openMatch:/^\\?(\-{2,}|\x60{2,})([\w\s-]*)$/,openTag:"<pre><code>",closeTag:"</code></pre>",expansionOptions:{macros:false,specials:true},delimiterFilter:classInjectionFilter},{name:"html",openMatch:/^(<!.*|(?:<\/?(?:html|head|body|iframe|script|style|address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|figcaption|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|img|math|nav|noscript|ol|output|p|pre|section|table|tfoot|td|th|tr|ul|video)(?:[ >].*)?))$/i,closeMatch:/^$/,openTag:"",closeTag:"",expansionOptions:{macros:true},delimiterFilter:delimiterTextFilter,contentfilter:options.safeModeFilter},{name:"indented",openMatch:/^\\?(\s+.*)$/,closeMatch:/^$/,openTag:"<pre><code>",closeTag:"</code></pre>",expansionOptions:{macros:false,specials:true},delimiterFilter:delimiterTextFilter,contentfilter:function(text){var first_indent=text.search(/\S/);var buffer=text.split("\n");for(var i in buffer){var indent=buffer[i].search(/\S/);if(indent>first_indent)indent=first_indent;buffer[i]=buffer[i].slice(indent)}return buffer.join("\n")}},{name:"quote-paragraph",openMatch:/^\\?(>.*)$/,closeMatch:/^$/,openTag:"<blockquote><p>",closeTag:"</p></blockquote>",expansionOptions:{macros:true,spans:true,specials:true},delimiterFilter:delimiterTextFilter,contentfilter:function(text){var buffer=text.split("\n");for(var i in buffer){buffer[i]=buffer[i].replace(/^>/,"");buffer[i]=buffer[i].replace(/^\\>/,">")}return buffer.join("\n")}},{name:"paragraph",openMatch:/^(.*)$/,closeMatch:/^$/,openTag:"<p>",closeTag:"</p>",expansionOptions:{macros:true,spans:true,specials:true},delimiterFilter:delimiterTextFilter}];function reset(){defs=DEFAULT_DEFS.map(function(def){return utils.copy(def)})}exports.reset=reset;function render(reader,writer){if(reader.eof())throw"premature eof";for(var _i=0;_i<defs.length;_i++){var def=defs[_i];var match=reader.cursor().match(def.openMatch);if(match){if(match[0][0]==="\\"&&def.name!=="paragraph"){reader.cursor(reader.cursor().slice(1));continue}var delimiterText=def.delimiterFilter?def.delimiterFilter(match):"";var lines=[];if(delimiterText){lines.push(delimiterText)}reader.next();var content=reader.readTo(def.closeMatch);if(content){lines=lines.concat(content)}var expansionOptions={macros:false,spans:false,specials:false,container:false,skip:false};utils.merge(expansionOptions,def.expansionOptions);utils.merge(expansionOptions,lineBlocks.blockOptions);if(!expansionOptions.skip){var text=lines.join("\n");if(def.contentfilter){text=def.contentfilter(text,match,expansionOptions)}writer.write(utils.injectHtmlAttributes(def.openTag));if(expansionOptions.container){delete lineBlocks.blockOptions.container;text=api.render(text)}else{text=utils.replaceInline(text,expansionOptions)}writer.write(text);writer.write(def.closeTag);if((def.openTag||text||def.closeTag)&&!reader.eof()){writer.write("\n")}}lineBlocks.blockOptions={};return true}}return false}exports.render=render;function getDefinition(name){return defs.filter(function(def){return def.name===name})[0]}exports.getDefinition=getDefinition;function setBlockOptions(blockOptions,optionsString){if(optionsString){var opts=optionsString.trim().split(/\s+/);for(var _i=0;_i<opts.length;_i++){var opt=opts[_i];if(options.isSafe()&&opt==="-specials"){return}if(/^[+-](macros|spans|specials|container|skip)$/.test(opt)){blockOptions[opt.slice(1)]=opt[0]==="+"}}}}exports.setBlockOptions=setBlockOptions;function setDefinition(name,value){var def=getDefinition(name);var match=utils.trim(value).match(/^(?:(<[a-zA-Z].*>)\|(<[a-zA-Z\/].*>))?(?:\s*)?([+-][ \w+-]+)?$/);if(match){if(match[1]){def.openTag=match[1];def.closeTag=match[2]}setBlockOptions(def.expansionOptions,match[3])}}exports.setDefinition=setDefinition;function delimiterTextFilter(match){return match[1]}function classInjectionFilter(match){if(match[2]){var p1;if(p1=utils.trim(match[2])){lineBlocks.htmlClasses=p1}}this.closeMatch=RegExp("^"+utils.escapeRegExp(match[1])+"$");return""}},function(module,exports){var Reader=function(){function Reader(text){this.lines=text.split(/\r\n|\r|\n/g);this.pos=0}Reader.prototype.cursor=function(value){if(value===void 0){value=null}if(this.eof())return null;if(value!==null){this.lines[this.pos]=value}return this.lines[this.pos]};Reader.prototype.eof=function(){return this.pos>=this.lines.length};Reader.prototype.next=function(){if(this.eof())return null;this.pos++;if(this.eof())return null;return this.lines[this.pos]};Reader.prototype.readTo=function(find){var result=[];var match;while(!this.eof()){match=this.cursor().match(find);if(match){if(match[1]!==undefined){result.push(match[1])}this.next();break}result.push(this.cursor());this.next()}if(match||find.toString()==="/^$/"&&this.eof()){return result}else{return null}};Reader.prototype.skipBlankLines=function(){while(this.cursor()===""){this.next()}};return Reader}();exports.Reader=Reader;var Writer=function(){function Writer(){this.buffer=[]}Writer.prototype.write=function(s){this.buffer.push(s)};Writer.prototype.toString=function(){return this.buffer.join("")};return Writer}();exports.Writer=Writer},function(module,exports,__webpack_require__){var utils=__webpack_require__(4);var io=__webpack_require__(10);var delimitedBlocks=__webpack_require__(9);var defs=[{match:/^\\?\s*(-|\+|\*{1,4})\s+(.*)$/,listOpenTag:"<ul>",listCloseTag:"</ul>",itemOpenTag:"<li>",itemCloseTag:"</li>"},{match:/^\\?\s*(?:\d*)(\.{1,4})\s+(.*)$/,listOpenTag:"<ol>",listCloseTag:"</ol>",itemOpenTag:"<li>",itemCloseTag:"</li>"},{match:/^\\?\s*(.*[^:])(:{2,4})(|\s+.*)$/,listOpenTag:"<dl>",listCloseTag:"</dl>",itemOpenTag:"<dd>",itemCloseTag:"</dd>",termOpenTag:"<dt>",termCloseTag:"</dt>"}];var ids;function render(reader,writer){if(reader.eof())throw"premature eof";var startItem;if(!(startItem=matchItem(reader))){return false}ids=[];renderList(startItem,reader,writer);return true}exports.render=render;function renderList(startItem,reader,writer){ids.push(startItem.id);writer.write(utils.injectHtmlAttributes(startItem.def.listOpenTag));var nextItem;while(true){nextItem=renderListItem(startItem,reader,writer);if(!nextItem||nextItem.id!==startItem.id){writer.write(startItem.def.listCloseTag);ids.pop();return nextItem}startItem=nextItem}}function renderListItem(startItem,reader,writer){var def=startItem.def;var match=startItem.match;var text;if(match.length===4){writer.write(def.termOpenTag);text=utils.replaceInline(match[1],{macros:true,spans:true});writer.write(text);writer.write(def.termCloseTag)}writer.write(def.itemOpenTag);var lines=new io.Writer;lines.write(match[match.length-1]);lines.write("\n");reader.next();var nextItem;nextItem=readToNext(reader,lines);text=lines.toString();text=utils.replaceInline(text,{macros:true,spans:true});writer.write(text);while(true){if(!nextItem){writer.write(def.itemCloseTag);return null}else if(nextItem.isListItem){if(ids.indexOf(nextItem.id)!==-1){writer.write(def.itemCloseTag);return nextItem}else{nextItem=renderList(nextItem,reader,writer);writer.write(def.itemCloseTag);return nextItem}}else if(nextItem.isDelimited||nextItem.isIndented){var savedIds=ids;ids=[];delimitedBlocks.render(reader,writer);ids=savedIds;reader.skipBlankLines();if(reader.eof()){writer.write(def.itemCloseTag);return null}else{nextItem=matchItem(reader)}}}}function readToNext(reader,writer){var next;while(true){if(reader.eof())return null;if(reader.cursor()===""){reader.next();if(reader.cursor()===""){return null}reader.skipBlankLines();if(reader.eof())return null;return matchItem(reader,{indented:true})}next=matchItem(reader,{delimited:true});if(next){return next}writer.write(reader.cursor());writer.write("\n");reader.next()}}function matchItem(reader,options){if(options===void 0){options={}}var line=reader.cursor();var item={};for(var _i=0;_i<defs.length;_i++){var def_1=defs[_i];var match=def_1.match.exec(line);if(match){if(match[0][0]==="\\"){reader.cursor(reader.cursor().slice(1));return null}item.match=match;item.def=def_1;item.id=match[match.length-2];item.isListItem=true;return item}}var def;if(options.delimited){for(var _a=0,_b=["quote","code","division"];_a<_b.length;_a++){var name_1=_b[_a];def=delimitedBlocks.getDefinition(name_1);if(def.openMatch.test(line)){item.isDelimited=true;return item}}}if(options.indented){def=delimitedBlocks.getDefinition("indented");if(def.openMatch.test(line)){item.isIndented=true;return item}}return null}}]);